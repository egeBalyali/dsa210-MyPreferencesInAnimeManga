<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Score Predictor</title>
    <style>
        .screen {
            display: none;
        }
        .active {
            display: block;
        }
        button {
            margin-top: 20px;
        }
    </style>
    <link rel="stylesheet" href="static/css/styles.css">
    <script src="static/quizData.js"></script>
    <script src="static/quiz.js"></script>
</head>
<body>
    <!-- Input Screen -->
    <div id="inputScreen" class="screen active">
        <p>Try to guess the answers by two info. My name is Ege BalyalÄ±. I look like this:</p>
        <img src="static/images/instafoto.jpg" alt="Instafoto" style="max-width: 50%; height: auto;">
        <p id="image-roast">Not the <b>most original pose</b>, but I watch anime; what was the expectation?</p>
        <div id="infoContainer">
            <p id="info1">Q1</p>
            <div id="quiz1" class="quiz"></div>
            <p id="info2">Q2</p>
            <div id="quiz2" class="quiz"></div>
            <p id="info3">Q3</p>
            <div id="quiz3" class="quiz"></div>
            <p id="info4">Q4</p>
            <div id="quiz4" class="quiz"></div>
            <p id="info5">Q5</p>
            <div id="quiz5" class="quiz"></div>
        </div>
        <button id="submitQuiz">Submit Quiz</button>
        <p id="quizResult"></p>

        <h1 id="website-header">This Website</h1>
        <p id="welcome-paragraph">
            Welcome to my website (you guessed it, on GitHub Pages) about my taste in anime and manga...
        </p>
        <!-- More static content here -->

        <h1>Ege Score Predictor</h1>
        <form id="predictionForm">
            <label for="url">Enter Anime URL:</label>
            <input type="text" id="url" name="url" required>
            <button type="submit">Predict</button>
        </form>
    </div>

    <!-- Output Screen -->
    <div id="outputScreen" class="screen">
        <h1 id="outputTitle">Prediction Result</h1>
        <img id="animePicture" alt="Anime Main Picture" style="max-width: 300px; margin-bottom: 20px;" />
        <p id="animeId"></p>
        <p id="predictedScore"></p>
        
        <h1>What are the coefficients of this simple model though. How can it guess so nicely. Let's take a look:</h1>
        <img src="static/graphs/feature_coefficients.png">
        <p> You might ask, is this really meaningful. Is genre being martial arts such a great thing that it has such a coeffient. First of 
            yes. I adore any martial arts manga. But of course some of these are not really sensical. The greates use is the mean score of the users. Since I am quite close to it and only get far from it by little much, this model works quite well. Let's check the error metrics:
        </p>
        <img src="static/graphs/error_metrics.png">
        <p> This was my work. If you want to also see other graphs I prepared here they are:</p>
        <h1>These are for anime</h1>
        <img src="static/graphs/anime_genre_distribution.png">
        <img src="static/graphs/anime_start_seasons.png">
        <img src="static/graphs/anime_status_distribution.png">
        <img src="static/graphs/progress_vs_score.png">
        <img src="static/graphs/top_studios_by_anime_produced.png">


        <h1>These are for manga</h1>
        <img src="static/mangagraphs/progress_vs_score.png">
        <img src="static/mangagraphs/genre_distribution.png">
        <button id="backButton">Go Back</button>
    </div>

    <script>
        // Quiz-related functionality
        const quizContainerIds = ['quiz1', 'quiz2', 'quiz3', 'quiz4', 'quiz5'];
        const quizResult = document.getElementById('quizResult');
        let userAnswers = {};
        
        function populateQuiz() {
            quizContainerIds.forEach((containerId, index) => {
                const quizContainer = document.getElementById(containerId);
                const quiz = quizData[index];
                if (!quiz) return;
                const questionElem = document.createElement('p');
                questionElem.textContent = quiz.question;
                quizContainer.appendChild(questionElem);

                quiz.options.forEach(option => {
                    const label = document.createElement('label');
                    label.textContent = option;
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `quiz-${quiz.id}`;
                    input.value = option;
                    input.addEventListener('change', () => {
                        userAnswers[quiz.id] = option;
                    });
                    label.prepend(input);
                    quizContainer.appendChild(label);
                    quizContainer.appendChild(document.createElement('br'));
                });
            });
        }

        function calculateQuizResult() {
            let score = 0;
            quizData.forEach(quiz => {
                if (userAnswers[quiz.id] === quiz.correct) {
                    score++;
                }
            });
            quizResult.textContent = `You scored ${score} out of ${quizData.length}!`;
        }

        document.getElementById('submitQuiz').addEventListener('click', () => {
            calculateQuizResult();
        });

        populateQuiz();

        // Prediction mock
        const inputScreen = document.getElementById('inputScreen');
        const outputScreen = document.getElementById('outputScreen');
        const predictionForm = document.getElementById('predictionForm');
        const animeIdDisplay = document.getElementById('animeId');
        const predictedScoreDisplay = document.getElementById('predictedScore');
        const backButton = document.getElementById('backButton');

        predictionForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const url = document.getElementById('url').value;
            animeIdDisplay.textContent = `Anime ID: MockedAnime123`;
            predictedScoreDisplay.textContent = `Predicted Score: 8.75`;
            document.getElementById('animePicture').src = "static/images/mock_picture.jpg";

            inputScreen.classList.remove('active');
            outputScreen.classList.add('active');
        });

        backButton.addEventListener('click', () => {
            predictionForm.reset();
            outputScreen.classList.remove('active');
            inputScreen.classList.add('active');
        });
    </script>
</body>
</html>
